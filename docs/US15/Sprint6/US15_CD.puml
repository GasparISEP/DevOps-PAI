@startuml

skinparam ranksep 100
skinparam nodesep 100

package "TeacherCareerProgression Aggregate" as TCP {
entity "<<root>>\nTeacherCareerProgression" {
  -tcpID: TeacherCareerProgressionID
  -date: Date
  -workingPercentage: int
  -teacherID: TeacherID
  +TeacherCareerProgression(dateVO: DateVO, workingPercentageVO: WorkingPercentageVO, teacherIDVO: TeacherIDVO)
  +updateWorkingPercentage(workingPercentageVO: WorkingPercentageVO)
  +getDate(): DateVO
  +getTeacherID(): TeacherID
}
}

class US15_UpdateTeacherWorkingPercentageController {
  +US15_UpdateTeacherWorkingPercentageController(service: ITeacherCareerProgressionService)
  +updateWorkingPercentageInTeacherCareerProgression(dto: UpdateWorkingPercentageDTO)
  +findAll()
}

interface ITeacherCareerProgressionService {
  +updateWorkingPercentageInTeacherCareerProgression(dateVO: DateVO, workingPercentageVO: WorkingPercentageVO, teacherIDVO: TeacherIDVO)
  +findAll()
}

class TeacherCareerProgressionServiceImpl {
  +updateWorkingPercentageInTeacherCareerProgression(dateVO: DateVO, workingPercentageVO: WorkingPercentageVO, teacherIDVO: TeacherIDVO)
  +findAll()
}

interface ITeacherCareerProgressionRepository {
  +findLastTCPFromTeacherID(teacherIDVO: TeacherIDVO)
  +save(tcp: TeacherCareerProgression)
}

class TeacherCareerProgressionRepositorySpringData {
  +findLastTCPFromTeacherID(teacherIDVO: TeacherIDVO)
  +save(tcp: TeacherCareerProgression)
}

class UpdateWorkingPercentageDTO {
  -date: String
  -workingPercentage: int
  -acronym: String
  -nif: String
  -country: String
}

class UpdateWorkingPercentageOutputDTO {
  -success: boolean
  -message: String
}

interface IUpdateWorkingPercentageMapper {
  +toVOs(dto: UpdateWorkingPercentageDTO): (DateVO, WorkingPercentageVO, TeacherIDVO)
  +toOutputDTO(success: boolean, message: String): UpdateWorkingPercentageOutputDTO
}

class UpdateWorkingPercentageMapper implements IUpdateWorkingPercentageMapper {
  +toVOs(dto: UpdateWorkingPercentageDTO): (DateVO, WorkingPercentageVO, TeacherIDVO)
  +toOutputDTO(success: boolean, message: String): UpdateWorkingPercentageOutputDTO
}

class DateVO {
  -date: LocalDate
}

class WorkingPercentageVO {
  -percentage: int
}

class TeacherIDVO {
  -acronym: String
  -nif: String
  -country: String
}

' Associations

US15_UpdateTeacherWorkingPercentageController "1" --> "1" ITeacherCareerProgressionService : uses
ITeacherCareerProgressionService <|.. TeacherCareerProgressionServiceImpl
TeacherCareerProgressionServiceImpl "1" --> "1" ITeacherCareerProgressionRepository : uses
ITeacherCareerProgressionRepository <|.. TeacherCareerProgressionRepositorySpringData

US15_UpdateTeacherWorkingPercentageController "1" --> "1" UpdateWorkingPercentageDTO : receives
US15_UpdateTeacherWorkingPercentageController "1" --> "1" UpdateWorkingPercentageOutputDTO : returns

US15_UpdateTeacherWorkingPercentageController "1" --> "1" IUpdateWorkingPercentageMapper : uses
UpdateWorkingPercentageMapper -|> IUpdateWorkingPercentageMapper

UpdateWorkingPercentageMapper "1" --> "1" DateVO : creates
UpdateWorkingPercentageMapper "1" --> "1" WorkingPercentageVO : creates
UpdateWorkingPercentageMapper "1" --> "1" TeacherIDVO : creates
UpdateWorkingPercentageMapper "1" --> "1" UpdateWorkingPercentageOutputDTO : creates

TCP "1" --> "1" DateVO : uses
TCP "1" --> "1" WorkingPercentageVO : uses
TCP "1" --> "1" TeacherIDVO : uses

@enduml
