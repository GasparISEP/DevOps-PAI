@startuml

title US01: As an Administrator, I want to configure teacher categories in the system \n (Process View - Level 3 - Backend)

skinparam defaultTextAlignment center
skinparam shadowing true

autonumber

participant ":Router" as router
-> router: configureTeacherCategory (name)
activate router #E1F5FE

note over router: The conversion from JSON to DTO is done automatically through the Spring Boot Framework

participant ":US01_ConfigureTeacherCategoryRESTController" as Controller
router -> Controller: configureTeacherCategory (name)
activate Controller #E1F5FE

participant ":ITeacherCategoryService" as service
Controller -> service: configureTeacherCategory (name)
activate service #E1F5FE

create "nameVO:Name"
service -> "nameVO:Name": create

participant ":ITeacherCategoryFactory" as Factory
service -> Factory: createTeacherCategory (nameVO)
activate Factory #E1F5FE

create "tcID:TeacherCategoryID"
Factory -> "tcID:TeacherCategoryID": create ()

create "tc:TeacherCategory"
Factory -> "tc:TeacherCategory": create (tcID, nameVO)
deactivate Factory

participant ":ITeacherCategoryRepository" as Repository
service -> Repository: existsByName (nameVO)
activate Repository #E1F5FE
Repository --> service: false
deactivate Repository

service -> Repository: save (tc)
activate Repository #E1F5FE

ref over Repository
    Convert teacherCategory to DataModel
end

participant ":ITeacherCategoryRepositorySpringData" as springDataRepository
Repository -> springDataRepository: save (tcDataModel)
activate springDataRepository #E1F5FE
springDataRepository --> Repository : tcDataModelSaved
deactivate springDataRepository

ref over Repository
    Convert tcDataModelSaved to Domain
end

Repository --> service: tcSaved
deactivate Repository

ref over service
    Convert tcSaved to DTO
end

service --> Controller: tcSavedResponseDTO
deactivate service

Controller --> router: (201, Created) tcSavedResponseDTO
deactivate Controller

note over router: The conversion from DTO to JSON is done automatically through the Spring Boot Framework

<-- router: (201, Created) tcSavedResponseJSON
deactivate router

@enduml