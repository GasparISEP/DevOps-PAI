@startuml

title As a RUC, I want to grade a Student in a Course Edition \n (Process View Level 3)

skinparam sequencemessagealign center
autonumber

actor RUC
participant ":UI" as ui #application
participant ":Controller" as controller #motivation
participant ":Service" as service #business
participant ":Repository" as repo #technology
participant ":Domain" as domain #physical
database db #wheat

RUC -> ui : Select **Student grading** in a **CourseEdition** functionality
activate ui
ui --> RUC : What is the Student grading information?

deactivate ui
RUC -> ui : Fill in the **Student grading** information \n (Grade, Date, CourseEditionID, StudentID)

activate ui
ui -> controller : Submit Student grading information

activate controller
controller -> service : Create a new Student grade

activate service
service -> repo : Check if Student is enrolled
activate repo
repo --> service : true
deactivate repo
deactivate service

service -> repo : Check if date of the grade is in range of the School Year
activate service
activate repo
repo --> service : true
deactivate repo
deactivate service

service -> repo : Check if Student is already graded
activate service
activate repo
repo --> service : false
deactivate repo
deactivate service

service -> domain : Create new Student grade
activate service
activate domain
domain --> service : Student Grade
deactivate domain
deactivate service

service -> repo : save Student Grade
activate service
activate repo
repo -> db : save
activate db
db --> repo : saved!
deactivate db
repo --> service : Student Grade saved!
deactivate repo

service --> controller : Student Grade saved!
deactivate service

controller --> ui : Student Grade saved!
deactivate controller

ui --> RUC : Student graded successfully!

@enduml