@startuml

title As a RUC, I want to grade a Student in a Course Edition \n (Process View Level 4)
skinparam sequencemessagealign center
autonumber

actor RUC
participant ":UI" as ui #application
participant ":CourseEditionRESTController" as ctrlrREST #business
participant ":StudentGradeAssemblerImpl" as assembler #implementation
participant ":GradeAStudentServiceImpl" as service #motivation
participant ":StudentGradeRepositorySpringData" as sgr #lightcoral
participant ":StudentGradeMapper" as sgmp #mistyrose
participant ":IStudentGradeRepositorySpringData" as IStudentGradeRepoSpringData #khaki


RUC -> ui : I want to **grade a Student** in a Course Edition
activate ui

ref over ui : \t    **Interaction Use #1** \n \n \t **(GET)** \n \t \t Retrieves All Course Editions from Database

ui --> RUC : Which CourseEdition?
RUC -> ui : This CourseEdition!

ui --> RUC : Fill in the **Student grading** information
RUC -> ui : grade, date, courseEditionID, studentID!
ui -> ctrlrREST : **(POST)** \n gradeAStudent (gradeAStudentRequestDTO)
activate ctrlrREST

ref over ctrlrREST : \t \t \t \t  **Interaction Use #2** \n \n \t \t \t \t \t Convert StudentGradeRequestDTO \n \t \t \t \t      into GradeAStudentCommand


ctrlrREST -> service : gradeAStudent (gradeAStudentCommand)
activate service
ref over service : \t \t \t \t  **Interaction Use #3** \n \n \t \t \t          Validate Grading Business Rules and \n \t \t \t \t  Create **StudentGrade** Entity
service -> sgr : save(studentGrade1)
activate sgr
sgr -> sgmp : toData(studentGrade1)
activate sgmp
sgmp --> sgr : studentGradeDataModel1
deactivate sgmp
sgr -> IStudentGradeRepoSpringData : save(studentGradeDataModel1)
activate IStudentGradeRepoSpringData
IStudentGradeRepoSpringData ->  : insert
IStudentGradeRepoSpringData <--  : studentGradeDataModel1
IStudentGradeRepoSpringData --> sgr : studentGrade1
deactivate IStudentGradeRepoSpringData
sgr -> sgmp : toDomain(studentGradeDataModel1)
activate sgmp
sgmp --> sgr : studentGrade1
deactivate sgmp
sgr --> service -- : studentGrade1
service --> ctrlrREST -- : Status Code 200 (OK!)
ctrlrREST --> ui -- : Status Code 200 (OK!)
ui --> RUC : Success!
deactivate ui

@enduml