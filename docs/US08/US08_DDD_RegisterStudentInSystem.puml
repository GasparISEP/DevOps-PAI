@startuml
autonumber
skinparam sequenceMessageAlign center


actor ASC
participant ":UI" as UI #implementation
participant "ctrl1:RegisterStudentInSystemController" as ctrl #lightyellow
participant "sr1:StudentRepository" as SR #lightcyan
participant "sf1:StudentFactory" as SF #technology
participant "s[i]:Student" as Student #strategy
participant "s1:Student" as s1 #strategy

ASC -> UI: I want to register a student in the system
activate UI
UI --> ASC: What is the Student's information?
ASC -> UI: studentID, name, NIF, phone, email, \n street, postalCode, location, country

UI -> ctrl: I want to register a Student \n (studentID, name, NIF, phone, email, \n street, postalCode, location, country)
activate ctrl
ref over ctrl
    Convert studentID, name, NIF, phone, email,
    street, postalCode, location, country to VO
end ref

ctrl -> SR: registerStudent \n (studentID VO, nameVO, NIF VO, phoneVO, emailVO, \n streetVO, postalCodeVO, locationVO, countryVO)

activate SR

SR -> SF: newStudent \n (uniqueNumberVO, nameVO, NIF VO, phoneVO, emailVO, \n streetVO, postalCodeVO, locationVO, countryVO)
activate SF
SF --> s1**: new Student \n (uniqueNumberVO, nameVO, NIF VO, phoneVO, emailVO, \n streetVO, postalCodeVO, locationVO, countryVO)
activate s1
s1 --> SF: s1 (new Student)
deactivate s1
SF --> SR: s1 (new Student)
deactivate SF

SR -> SR : isStudentRepeated(s1)

loop for each Student in SR
    SR -> Student: hasSameID(s1)
    activate Student
end

Student --> SR : False
deactivate Student

SR -> SR: students.add(s1)
SR --> ctrl: True
deactivate SR
ctrl --> UI: True
deactivate ctrl
UI --> ASC: Success!
deactivate UI

@enduml