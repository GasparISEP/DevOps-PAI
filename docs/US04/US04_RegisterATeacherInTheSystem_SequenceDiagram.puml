@startuml
autonumber

title US04: Register a Teacher in the System

actor Administrator
participant ": UI" as UI
participant ":US04_IWantToRegisterATeacherInTheSystemController" as Controller
participant ": DepartmentRepository" as DepartmentRepository
participant ": TeacherRepository" as TeacherRepository
participant ": TeacherFactoryInterface" as TeacherFactory
participant "t1: Teacher" as Teacher
participant ": TeacherList" as TeacherI

Administrator -> UI : I want to register a teacher in the system.
activate UI #ddfada
UI --> Administrator: What data: teacherID, name, email, nif, phoneNumber,\n academicBackground,address,departmentID?
deactivate UI
Administrator -> UI: Enter data: teacherID, name, email, nif, phoneNumber,\n academicBackground,address, departmentID!
activate UI #ddfada
UI --> Administrator : Sure?
deactivate UI
Administrator -> UI: Yes!
activate UI #ddfada
UI -> Controller : registerATeacherInTheSystem( teacherID, name, email, nif, phoneNumber,\n academicBackground,address, departmentID)
activate Controller #ddfada
Controller -> DepartmentRepository : isDepartmentInDepartmentRepository(departmentID)
activate DepartmentRepository  #ddfada
DepartmentRepository -->Controller : True
deactivate DepartmentRepository
Controller -> TeacherRepository: registerTeacher(teacherID, name, email, nif, phoneNumber,\n academicBackground,address, departmentID)
activate TeacherRepository #ddfada

TeacherRepository -> TeacherFactory: createTeacher (teacherID, name, email, nif, phoneNumber,\n academicBackground,address, departmentID)
TeacherFactory -> Teacher **: createTeacher (teacherID, name, email, nif, phoneNumber,\n academicBackground,address, departmentID)
activate Teacher #ddfada
Teacher --> TeacherFactory: t1
deactivate Teacher
TeacherFactory --> TeacherRepository: t1
deactivate TeacherFactory
loop for each Teacher t[i] in TeacherRepository
TeacherRepository -> TeacherI: compareTeacherIDAndNifInList (t1:Teacher)
activate TeacherI #ddfada
TeacherI --> TeacherRepository: TeacherID and NIF are not in the list
deactivate TeacherI
end
TeacherRepository -> TeacherI: add (t1:Teacher)
activate TeacherI  #ddfada
TeacherI --> TeacherRepository: True
deactivate TeacherI
TeacherRepository --> Controller : True
deactivate TeacherRepository
Controller --> UI : True
deactivate Controller
UI -->Administrator : OK!
deactivate UI
@enduml
