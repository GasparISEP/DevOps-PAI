@startuml
!pragma layout smetana


class US16_EnrollAStudentInACourseEditionController {
    +US16_EnrollAStudentInACourseEditionController(ceeRepository: CourseEditionEnrollmentRepository,
    peeRepository: ProgrammeEditionEnrollmentRepo , courseEditionRepository: CourseEditionRepository)
    +enrollStudentInCourseEdition(student: Student, courseEdition: CourseEdition): boolean
}

class CourseEditionEnrollment {
    -_enrollmentDate: LocalDate
    +CourseEditionEnrollment(student:Student, courseEdition: CourseEdition,
     enrollmentDate: LocalDate)
    +equals (obj: Object): boolean
    +findStudentInCourseEditionEnrollment() : Student
    +findCourseEditionInEnrollment() : CourseEdition
    +knowStudent(): Object
    +knowCourseEdition(): Object
}

class CourseEditionEnrollmentRepository {
    +CourseEditionEnrollmentRepository ()
    +enrollStudentInACourseEdition (student: Student, courseEdition: CourseEdition,
    enrollmentDate: LocalDate): boolean
    +isStudentEnrolledInCourseEdition (student: Student, courseEdition: CourseEdition) : boolean
    +findByStudentAndEdition (student: Student, courseEdition: CourseEdition) : Optional <CourseEditionEnrollment>
    +numberOfStudentsEnrolledInCourseEdition (courseEdition: CourseEdition) : int
    +enrollStudentInProgrammeEditionCourseEditions (student: Student, courseEditions: List<CourseEdition>) : void
}

class ProgrammeEditionEnrollment {
    -_enrollmentDate: LocalDate
    +ProgrammeEditionEnrollment(student:Student, programmeEdition: ProgrammeEdition,
     enrollmentDate: LocalDate)
    +isEnrollmentAssociatedToDepartmentAndSchoolYear(department: Department, schoolYear: SchoolYear) : boolean
    +getStudentUniqueNumber() : int
    +equals (obj: Object) : boolean
    +findProgrammeEditionInEnrollment () : ProgrammeEdition
    +findStudentInProgrammeEdition () : Student
}

class ProgrammeEditionEnrollmentRepo {
    +ProgrammeEditionEnrollmentRepo()
    +enrollStudentInProgrammeEdition (student: Student, programmeEdition: ProgrammeEdition,
    localDate: LocalDate) : boolean
    +isStudentEnrolledInThisProgrammeEdition(student: Student, programmeEdition: ProgrammeEdition) : boolean
    +checkIfThisEnrollmentAlreadyExists(programmeEditionEnrollment: ProgrammeEditionEnrollment) : void
    +countStudentsInProgrammesFromDepartmentInSchoolYear(department: Department, schoolYear: SchoolYear) : int
    +getTheNumberOfStudentsEnrolledInAProgrammeEdition(programmeEdition: ProgrammeEdition) : int
}

class Student {
    -_uniqueNumber:int
    -_name:String
    -_NIF:String
    -_phone:String
    -_email:String
    +Student(uniqueNumber: int, name: String, NIF: String, phone: String, email: String, address: Address)
    +hasSameUniqueNumber(Student student) : boolean
    +hasSameNIF (student: Student) : boolean
    +getUniqueNumber () : int
}

class Address {
     -_street:String
     -_postalCode: String
     -_location: String
     -_country: String
     +Address(street: String, postalCode: String, location: String, country: String)
}

class CourseEdition {
    +CourseEdition(programmeEdition: ProgrammeEdition, course: Course)
    +Equals(objectToCompare: Object) : boolean
    +setRuc(Teacher: ruc) : boolean
    +whatProgrammeEditionBelongsThisCourseEdition () : ProgrammeEdition
}

class CourseEditionRepository {
    +CourseEditionRepository()
    +createCourseEdition(course: Course, programmeEdition: ProgrammeEdition) : boolean
    +isCourseEditionAlreadyInRepository (courseEdition: CourseEdition) : boolean
    +findWhichProgrammeEditionBelongsToACourseEdition(courseEdition: CourseEdition) : ProgrammeEdition
    +setRucInACourseEdition(CourseEdition: courseEdition,Teacher: ruc) : boolean
    +getCourseEditions(): List<CourseEdition>
    +findCourseEditionsByProgrammeEdition(ProgrammeEdition programmeEdition) : List<CourseEdition>
}


CourseEdition "*   _listCourseEditions" <-- "1" CourseEditionRepository
Student "_student  1  " <-- "*" CourseEditionEnrollment
CourseEditionEnrollment "*" --> "_courseEdition 1  " CourseEdition
CourseEditionEnrollment "                                *" <-- "1" CourseEditionEnrollmentRepository: _listCourseEditionEnrollment
ProgrammeEditionEnrollment "*" --> "_student   1                " Student
ProgrammeEditionEnrollment "_listProgrammeEditionEnrollment    *     " <-- "1" ProgrammeEditionEnrollmentRepo
US16_EnrollAStudentInACourseEditionController "1"..> "1" CourseEditionRepository
US16_EnrollAStudentInACourseEditionController "1"..> "1" ProgrammeEditionEnrollmentRepo
US16_EnrollAStudentInACourseEditionController "1"..> "1" CourseEditionEnrollmentRepository
Address "_address  1  " <-- "1  " Student

@enduml