@startuml
autonumber

skinparam sequence {
    LifelineBorderColor black
    LifelineBackgroundColor LightBlue
    ActorBorderColor black
    ActorBackgroundColor LightGray
    GroupBorderColor #cccccc
    GroupBackgroundColor #f2f2f2
}

title US16: Enroll a Student in a Course Edition\nProcess View â€“ Level 3

actor ASC as "Academic Services Coordinator"
participant ":Frontend" as FE
participant ":Controller" as CT
participant ":Service" as SE
participant ":Domain" as DM
participant ":Repository" as RE

group Human Interaction
ASC -> FE ++: Request to enroll a student
FE --> ASC --: Prompt: "Enter student name"
ASC -> FE ++: Input: "John Doe"
FE --> ASC --: Display matching students
ASC -> FE ++: Select student
FE --> ASC --: Display programme editions
ASC -> FE ++: Select programme edition
FE --> ASC --: Display course editions
ASC -> FE ++: Select course edition
end group

group HTTP Request
FE -> CT ++: (POST) /courseeditions/enrolments with JSON {request}
end group

group Application Service Invocation
CT -> SE ++: enrollStudentInCourseEdition(command)

group Domain Logic
SE -> DM ++: CourseEditionEnrolment enrollment = new CourseEditionEnrolment(command.studentId(), command.programmeEditionId(), command.courseEditionId())
DM --> SE --: enrollment
end group

group Persistence
SE -> RE ++: save(enrollment)
RE --> SE --: Persisted enrollment
end group

SE --> CT --: enrollment
end group

group HTTP Response
CT --> FE --: HTTP 201 Created + EnrollmentDTO
FE --> ASC --: Student enrolled successfully
end group

@enduml 