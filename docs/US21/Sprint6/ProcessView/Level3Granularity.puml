@startuml

title US21: As an ASC, I want to get the number of students enrolled in a programme edition\n(Process View - Level 3 Granularity)

skinparam defaultTextAlignment center
skinparam shadowing true

autonumber

participant ":Router" as router <<Component>>
participant ":RESTController" as controller <<Component>>
participant ":Service" as service <<Component>>
participant ":Domain" as domain <<Component>>
participant ":Repository" as repository <<Component>>
-> router: select a programmeEdition()
activate router #E1F5FE
router -> controller :getallprogrammeEditions()
activate controller#E1F5FE
controller -> service : getallprogrammeEditions()
activate service#E1F5FE
service -> repository:getallprogrammeEditions()
activate repository#E1F5FE
repository --> service:List<ProgrammeEdition> programmeEditions
deactivate repository#E1F5FE
service --> controller : List<ProgrammeEdition> programmeEditions
deactivate service
controller --> router:(200,ok)List of all programmeEditions
deactivate controller#E1F5FE
<-- router:(200,ok)List of all programmeEditions
deactivate router #E1F5FE
-> router: getNumberOfStudentsInAProgrammeEdition (ProgrammeEditionJSON)
activate router #E1F5FE

router -> controller: getNumberOfStudents (CountStudentsDto)
activate controller #E1F5FE

controller -> service: getNumberOfStudents (CountStudentsDto)
activate service #E1F5FE

service -> domain: countTotalNumberOfStudentsInAProgrammeEdition
activate domain #E1F5FE

domain --> service: ProgrammeEdition
deactivate domain

service -> repository: getAllProgrammeEditionsEnrollmentByProgrammeEditionID(programmeEditionID)
activate repository #E1F5FE

repository --> service: List<ProgrammeEditionEnrolments>programmeEditionEnrolments
deactivate repository

service --> controller: totalNumberOfStudents
deactivate service

controller --> router: (200, ok) totalNumberOfStudents
deactivate controller

<-- router: (200,ok) totalNumberOfStudents
deactivate router

@enduml