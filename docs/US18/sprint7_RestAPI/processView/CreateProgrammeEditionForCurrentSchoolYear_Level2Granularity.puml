@startuml

title US18 \n As an ASC, I want to create a programme edition for the current school year \n Process View - Level 2 Granularity
skinparam titleFontName "Verdana"
skinparam defaultFontName "Verdana"
skinparam defaultTextAlignment center
skinparam shadowing true
skinparam actorBackgroundColor #lightblue
skinparam participantBackgroundColor #lightblue/white
autonumber


participant ":Frontend" as frontend <<Component>>
participant ":Backend" as backend <<Component>>
participant ":Database" as DB <<Component>>

-> frontend: I want to create a programme edition for the current school year!
activate frontend #E1F5FE

frontend -> backend: GET /programmes
activate backend #E1F5FE
backend -> DB: SELECT *  FROM programme
activate DB #E1F5FE
DB --> backend: programmes
deactivate DB
backend --> frontend: 200 OK + programmes
deactivate backend
<-- frontend: Display programme selection list.

-> frontend: Select programme.


<-- frontend: Sure?

-> frontend: Yes!

frontend -> backend: POST /programme-editions + body {"programmeId":d1f9c6a4-3e7b-4a9f-bd43-7a2d8f4e1c9b}
activate backend #E1F5FE
backend -> DB: INSERT INTO programme_edition (programme_id, school_year_id) VALUES (d1f9c6a4-3e7b-4a9f-bd43-7a2d8f4e1c9b, <currentSchoolYearID>)
activate DB #E1F5FE
DB --> backend: programmeEdition
deactivate DB


backend --> frontend: 201 Created + body {ProgrammeEditionResponseDTO + hypermedia}
deactivate backend

<-- frontend: Ok!
deactivate frontend

@enduml