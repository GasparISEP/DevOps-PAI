@startuml
title : US18_Create A Programme Edition For The Current School Year
autonumber
Actor ASC

participant ":UI" as UI
participant ":CreateAProgrammeEditionForTheCurrentSchoolYearController" as CPEC
participant ":ProgrammeRepository" as PR
participant ":SchoolYearRepository" as SYR
participant ":ProgrammeEditionRepository" as PER
participant ":ProgrammeEditionFactory" as PEF

ASC -> UI ++ #application : I want to create a programme edition for the current school year
UI -> CPEC ++ #application : getAllProgrammeNames()
CPEC -> PR ++ #application : getAllProgrammeNames()
PR --> CPEC -- : programmeNamesList
CPEC --> UI -- : programmeNamesList
UI -> ASC --  : Which Programme?
ASC -> UI ++ #application : Licenciatura Engenharia Informática
UI -> CPEC ++ #application : createAProgrammeEditionForTheCurrentSchoolYear(Licenciatura Engenharia Informática)

CPEC -> PR ++ #application : getProgrammeByIDByName(Licenciatura Engenharia Informática)
PR --> CPEC -- : programmeID
CPEC -> SYR ++ #application : getCurrentSchoolYear()
SYR --> CPEC : schoolYearID
SYR --
CPEC -> PER ++ #application : createProgrammeEdition(programmeID, schoolYearID)
PER -> PEF ++ #application : createProgrammeEdition(programmeID, schoolYearID)
create "programmeEdition:ProgrammeEdition" as PE
PEF -> PE : <create> (programmeID, schoolYearID)
create "programmeEditionID:ProgrammeEditionID" as PEID
PE -> PEID : <create> ()
PEF --> PER : programmeEdition
PEF--
PER -> PER : isProgrammeEditionAlreadyRegistered (programmeEdition)
PER -> PER : add (programmeEdition)
PER --> CPEC : true
PER --
CPEC --> UI : true
CPEC --
UI --> ASC -- : Programme Edition created for the current school year!
participant "programmeNameList:List<String>"
participant "programmeID:ProgrammeID"
participant "schoolYearID"
@enduml