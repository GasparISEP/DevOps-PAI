@startuml
title : US18_Create A Programme Edition For The Current School Year
autonumber
Actor ASC

participant ":UI" as UI
participant ":CreateAProgrammeEditionInTheCurrentSchoolYearController" as CPEC
participant ":ProgrammeList" as PL
participant ":SchoolYearRepo" as SYR
participant ":ProgrammeEditionRepo" as PER
participant ":ProgrammeEditionFactory" as PEF

ASC -> UI ++ #application : I want to create a programme edition for the current school year
UI -> CPEC ++ #application : getAllProgrammes()
CPEC -> PL ++ #application : getAllProgrammes()
PL --> CPEC -- : programmeList
CPEC --> UI -- : programmeList
UI -> ASC --  : Which Programme?
ASC -> UI ++ #application : Programme LEI
UI -> CPEC ++ #application : createAProgrammeEditionInTheCurrentSchoolYear(LEI)

CPEC -> PL ++ #application : getProgrammeByAcronym(LEI)
PL --> CPEC -- : programme
CPEC -> SYR ++ #application : getCurrentSchoolYear()
SYR --> CPEC : currentSchoolYear
SYR --
CPEC -> PER ++ #application : createProgrammeEdition(programme, currentSchoolYear)
PER -> PEF ++ #application : createProgrammeEdition(programme, currentSchoolYear)
create "programmeEdition:ProgrammeEdition" as PE
PEF -> PE : <create> (programme, currentSchoolYear)
PEF --> PER : programmeEdition
PEF--
PER -> PER : isProgrammeEditionAlreadyRegistered (programmeEdition)
PER -> PER : add (programmeEdition)
PER --> CPEC : true
PER --
CPEC --> UI : true
CPEC --
UI --> ASC -- : Programme Edition created for the current school year!
participant "programmeList:List<Programme>"
participant "programme:Programme"
participant "currentSchoolYear:SchoolYear"
@enduml