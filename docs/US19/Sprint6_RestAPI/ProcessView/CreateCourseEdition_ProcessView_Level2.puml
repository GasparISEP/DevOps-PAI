@startuml
title: US19: As an ASC, I want to create a course edition\n(Process View - Level 2: Containers)
autonumber

skinparam {
  ActivityPadding 2
  ActivityMargin 2
  BoxPadding 2
}
skinparam sequence {
    LifeLineBorderColor Grey
    LifeLineBackgroundColor HoneyDew
}
skinparam defaultTextAlignment center
skinparam shadowing true

actor ASC  #LightBlue/White
participant "<<Container>>\nFrontend" as Frontend #E1F5FE
participant "<<Container>>\nBackend" as Backend #E1F5FE
database "<<Container>>\nDatabase" as Database #E1F5FE

ASC -> Frontend: I want to create a course edition
activate Frontend

Frontend -> Backend: (GET) Request available degree types
activate Backend
Backend -> Database: (SELECT) Retrieve all degree types
activate Database
Database --> Backend: List of degree types
deactivate Database
Backend --> Frontend: (200 OK) List of degree types
deactivate Backend
Frontend --> ASC: Please select degree type

ASC -> Frontend: Select degree type
Frontend -> Backend: (GET) Request programmes for selected degree type
activate Backend
Backend -> Database: (SELECT) Retrieve programmes
activate Database
Database --> Backend: List of programmes
deactivate Database
Backend --> Frontend: (200 OK) List of programmes
deactivate Backend
Frontend --> ASC: Please select programme

ASC -> Frontend: Select programme
Frontend -> Backend: (GET) Request courses from study plan for selected programme
activate Backend
Backend -> Database: (SELECT) Retrieve courses in study plan
activate Database
Database --> Backend: List of courses in study plan
deactivate Database
Backend --> Frontend: (200 OK) List of courses in study plan
deactivate Backend
Frontend --> ASC: Please select programme edition

ASC -> Frontend: Select programme edition
Frontend -> Backend: (GET) Request programme editions for selected programme
activate Backend
Backend -> Database: (SELECT) Retrieve programme editions
activate Database
Database --> Backend: List of programme editions
deactivate Database
Backend --> Frontend: (200 OK) List of programme editions
deactivate Backend
Frontend --> ASC: Programme edition selected


ASC -> Frontend: Confirm course edition creation
Frontend -> Backend: (POST) Submit course edition creation
activate Backend
  'Applies business rules:


Backend -> Database: (INSERT) Persist course edition
activate Database
Database --> Backend: Course edition persisted
deactivate Database

Backend --> Frontend: (200 OK) Course edition created
deactivate Backend
Frontend --> ASC: Course edition created successfully!
deactivate Frontend
@enduml
