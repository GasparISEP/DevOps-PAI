@startuml
title: (US26)\nAs a Department Director, I want to get the number of students enrolled in all programmes associated to my department, in a given school year.\n(Process View Level 3)

autonumber

actor DD
participant ":UI" as UI
participant ":Controller" as C
participant ":Service" as S
participant ":Repository" as R
database DB

activate DD
DD -> UI++: Request to get the number of students enrolled in all\n programmes associated to my department, in a given school year

' Step 1: Obter lista de departamentos
UI -> C++: (GET) Request List Of Departments
C -> S++: Get all departments
S -> R++: Get all departments
R -> DB++: Fetch all departments
DB --> R--: List of department data models
R --> S--: List of department domain entities
S --> C--: List of department domain entities
C --> UI--: List of departments
UI --> DD--: Display departments

' Step 2: Obter lista de anos letivos
DD -> UI++: Select department
UI -> C++: (GET) Request List Of SchoolYears
C -> S++: Get all school years
S -> R++: Get all school years
R -> DB++: Fetch all school years
DB --> R--: List of school year data models
R --> S--: List of school year domain entities
S --> C--: List of school year domain entities
C --> UI--: List of school years
UI --> DD--: Display school years

' Step 3: Obter nÃºmero de alunos inscritos
DD -> UI++: Select school year
UI -> C++: (GET) Request number of students enrolled
C -> S++: Get number of students enrolled
S -> R++: Get enrollment data for selected department and school year
R -> DB++: Fetch enrollment data
DB --> R--: Enrollment data models
R --> S--: Enrollment domain objects (with business logic applied if needed)
S --> C--: Number of students enrolled
C --> UI--: Number of students enrolled
UI --> DD--: Display number of students

@enduml
